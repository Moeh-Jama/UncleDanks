<!Doctype html>
<html>
    <head>
        <title>UncleDanks</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
        <script src="https://www.gstatic.com/firebasejs/3.0.0/firebase.js"></script>
    </head>
    <body>

        <div id="MainWrapper" class="text-center">
            <header>
                <h1>Welcome to Moehs Messaging App</h1>
                <!-- Sign in if user is not authorised-->
{{ TextRetrieved }}
                {%  for i in TextRetrieved %}
                    <input type="text" placeholder="{{ i }}"/>

                {% endfor %}
            </header>
            <div id="mainBody">
                <div id="Messages">

                </div>
                {% if user.is_authenticated %}
                <form method="post" class="form-group" action="{% url 'sendMessage' %}">
                    <p>Say something {{ user.username }}!</p>
                    {% csrf_token %}
                    <input type="textera" name="enteredMessage" id="messageSent" placeholder="Enter your message here!">
                    <input type="submit" onClick="addMessage()" name="submit" value="Enter">
                </form>
                {% else %}
                    <a href="{%  url 'login' %}"><p class="btn btn-lg btn-primary btn-block">Please login to send anything.</p></a>
                {% endif %}
            </div>

        </div>


        <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase.js"></script>
        <script>
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyCLKnXHfD4mqCifYwA9Fm8PCiXaNZqDtkA",
            authDomain: "moehsmessagingapp.firebaseapp.com",
            databaseURL: "https://moehsmessagingapp.firebaseio.com",
            projectId: "moehsmessagingapp",
            storageBucket: "moehsmessagingapp.appspot.com",
            messagingSenderId: "529929215823"
          };
          var app = firebase.initializeApp(config),
              database = app.database(),
              auth = app.auth(),
      storage = app.storage();
            function addMessage() {
                var messageDEv = "<p><bold>{{ user.username }}:</bold>";
                var messageSent = document.getElementById('messageSent').value;
                console.log("Message being sent: "+messageSent);
                var message = messageDEv + document.getElementById('messageSent').value +"</p>";
                console.log(message);
                document.getElementById("Messages").innerHTML = message;
          }

        </script>
    </body>
</html>